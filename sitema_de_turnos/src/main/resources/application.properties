# Logging a archivo para depuración
logging.file.name=logs/app.log
logging.level.root=INFO
logging.level.com.example=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
spring.application.name=sitema_de_turnos

# ===========================
# Perfil Activo
# ===========================
# Usar 'dev' en desarrollo local, 'prod' en producción
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# ===========================
# Configuración JPA/Hibernate
# ===========================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===========================
# Servidor
# ===========================
server.port=8080

# ===========================
# Configuración de Sesiones
# ===========================
# Tiempo de expiración de sesión (en segundos): 8 horas = 28800 segundos
server.servlet.session.timeout=28800s

# Cookies de sesión con configuración segura
server.servlet.session.cookie.name=JSESSIONID
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
# PRODUCCIÓN: Cambiar server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict
server.servlet.session.cookie.path=/

# Orígenes permitidos para CORS (separados por comas). Ej: http://localhost:5173,https://mi-dominio.com
app.cors.allowed-origins=http://localhost:5173,http://127.0.0.1:5173

# ===========================
# Configuración WhatsApp Cloud API (Meta)
# ===========================
# URL base de la API de WhatsApp (versión v18.0)
whatsapp.api.url=${WHATSAPP_API_URL:https://graph.facebook.com/v18.0}

# Token de acceso de Meta (generar en Meta for Developers)
# Obtener en: https://developers.facebook.com/apps/ → Tu App → WhatsApp → API Setup
whatsapp.api.token=${WHATSAPP_API_TOKEN:}

# ID del número de teléfono verificado en WhatsApp Business
# Obtener en: https://developers.facebook.com/apps/ → Tu App → WhatsApp → API Setup
whatsapp.api.phone-number-id=${WHATSAPP_PHONE_NUMBER_ID:}

# ===========================
# Configuración Webhook WhatsApp
# ===========================
# Token de verificación del webhook (definir uno custom, ej: "mi_token_secreto_123")
# Configurar el mismo en Meta: App → WhatsApp → Configuration → Webhook
whatsapp.webhook.verify-token=${WHATSAPP_WEBHOOK_VERIFY_TOKEN:}

# Secret para validar firma HMAC de webhooks (App Secret de Meta)
# Obtener en: https://developers.facebook.com/apps/ → Tu App → Settings → Basic → App Secret
whatsapp.webhook.secret=${WHATSAPP_WEBHOOK_SECRET:}
